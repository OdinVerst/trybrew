---
import {Icon} from "astro-icon/components";
interface Props {
	recipe: CollectionEntry<'pourover'>
}

const { recipe, link } = Astro.props;
const properties = [
	{name: 'coffeeWeight', icon: 'coffee'},
	{name: 'water', icon: 'water'},
	{name: 'time', icon: 'time'},
	{name: 'temperature', icon: 'temperature'}
]
---

<article class="card">
	<a class="link" href={link}>{recipe.data.name}</a>
	<div class="properties">
		{properties.map(it => {
			const value = recipe.data[it.name]
			if (!value) {
				return
			}
			return <div class="property">
					<Icon name={it.icon}/>
					{recipe.data[it.name]}
				</div>
		})}
	</div>
	<div class="author">
		{recipe.data.authorImg &&
			<Icon name={recipe.data.authorImg} class="author__icon"/>}
		{recipe.data.author}
	</div>
</article>

<style>
	.card {
		position: relative;
		box-shadow: var(--common-box-shadow);
		padding: 24px;
		border-radius: 16px;
		background: var(--color-secondary-background);
		display: flex;
		flex-flow: column;
	}

	.link {
		font-size: 18px;
		font-weight: 600;
		margin-block-end: 16px;
		color: inherit;
		text-decoration: none;
	}

	.link:visited {
		color: inherit;
	}

	.link::after {
		position: absolute;
		inset: 0;
		content: "";
	}

	.properties {
		display: flex;
		gap: 8px;
	}

	.property {
		display: flex;
		align-items: center;
		gap: 4px;
	}

	.author {
		margin-block-start: 12px;
		display: flex;
		align-items: center;
		gap: 8px;
	}

	.author__icon {
		width: 24px;
		height: 24px;
	}
</style>
